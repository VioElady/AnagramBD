create table words
(
    id    bigserial    not null
        constraint words_pkey
            primary key,
    value varchar(255) not null
);
alter table words
    owner to postgres;
------
create unique index words_pkey
    on words (id);
create index words_value_index
    on words (value);
-------
ALTER TABLE words
    ADD COLUMN value_sort varchar(255);
------
COPY words (value)
    FROM 'D:\anagram\test.txt' DELIMITER ',';
-----
SELECT value_sort
FROM words
GROUP BY value_sort;
---------
CREATE OR REPLACE FUNCTION alfaSort(x TEXT) returns TEXT AS
$$
SELECT string_agg(c, '') as s
from (select unnest(regexp_split_to_array($1, '')) as c
      order by c) as t;
$$
    LANGUAGE sql immutable;
---------------
CREATE TABLE IF NOT EXISTS words
(
    value     varchar(255),
    value_sort varchar(255) GENERATED ALWAYS AS
                  (
        alfaSort ( value) ) STORED
);

